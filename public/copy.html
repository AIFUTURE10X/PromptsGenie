<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PromptsGenie: Quick Copy Snippets</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; color: #1f2937; }
    .section { border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px; background: #fff; }
    .header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px; }
    h3 { margin: 0; font-size: 16px; }
    button.copy { padding: 6px 10px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; font-size: 13px; color: #374151; }
    button.copy:hover { background: #f3f4f6; }
    pre { margin: 0; background: #0b1020; color: #e5e7eb; padding: 12px; border-radius: 6px; overflow: auto; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 13px; }
    .copied { color: #059669; font-size: 12px; margin-left: 8px; display: none; }
    .row { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 900px) { .row { grid-template-columns: 1fr 1fr; } }
  </style>
</head>
<body>
  <h2 style="margin-top:0;margin-bottom:12px;">PromptsGenie: Quick Copy Snippets</h2>
  <p style="margin-top:0;margin-bottom:16px;color:#4b5563;font-size:14px;">Handy payloads and cURL examples for the PromptsGenie API. Use quality mode and optional OCR hint for image analysis.</p>
  <div class="row">
    <div class="section">
      <div class="header">
        <h3>Analyze Image JSON (PromptsGenie API)</h3>
        <div>
          <button class="copy" data-target="content-a">Copy</button>
          <span class="copied" id="copied-a">Copied!</span>
        </div>
      </div>
      <pre><code id="content-a">{
  "base64": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HwAF/gL9w5gCpgAAAABJRU5ErkJggg==",
  "mimeType": "image/png",
  "options": { "detail": "medium", "tags": true, "ocrHint": true }
}</code></pre>
    </div>

    <div class="section">
      <div class="header">
        <h3>cURL Quickstart</h3>
        <div>
          <button class="copy" data-target="content-b">Copy</button>
          <span class="copied" id="copied-b">Copied!</span>
        </div>
      </div>
      <pre><code id="content-b"># Health
curl -s "http://localhost:8085/health"

# Metrics
curl -s "http://localhost:8085/metrics"

# Analyze Image (quality mode, OCR hint)
curl -s -X POST "http://localhost:8085/analyze-image" \
  -H "Content-Type: application/json" \
  -H "X-Analyze-Mode: quality" \
  -H "X-OCR-Hint: true" \
  -d '{
    "base64": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HwAF/gL9w5gCpgAAAABJRU5ErkJggg==",
    "mimeType": "image/png",
    "options": { "detail": "medium", "tags": true }
  }'

# Text to Prompt
curl -s -X POST "http://localhost:8085/text-to-prompt" \
  -H "Content-Type: application/json" \
  -H "X-Analyze-Mode: fast" \
  -d '{
    "intent": "Generate caption for a nature photo",
    "constraints": "casual, friendly",
    "length": "medium",
    "mode": "fast"
  }'

# Prompt to Text (refine)
curl -s -X POST "http://localhost:8085/prompt-to-text" \
  -H "Content-Type: application/json" \
  -H "X-Analyze-Mode: fast" \
  -d '{
    "prompt": "A calm lake with pine trees and mountains, warm sunset colors.",
    "task": "refine",
    "target_length": 120,
    "mode": "fast"
  }'
</code></pre>
    </div>
  </div>

  <script>
    function copyTextById(id) {
      const el = document.getElementById(id);
      const text = el ? el.innerText : '';
      return navigator.clipboard.writeText(text);
    }
    function showCopied(indicatorId) {
      const el = document.getElementById(indicatorId);
      if (!el) return;
      el.style.display = 'inline';
      setTimeout(() => { el.style.display = 'none'; }, 1200);
    }
    document.addEventListener('click', async (e) => {
      const btn = e.target.closest('button.copy');
      if (!btn) return;
      const targetId = btn.getAttribute('data-target');
      const indicatorId = targetId === 'content-a' ? 'copied-a' : 'copied-b';
      try {
        await copyTextById(targetId);
        showCopied(indicatorId);
      } catch (e) {
        // Fallback for older browsers
        const range = document.createRange();
        const node = document.getElementById(targetId);
        if (!node) return;
        range.selectNodeContents(node);
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
        document.execCommand('copy');
        sel.removeAllRanges();
        showCopied(indicatorId);
      }
    });
  </script>
</body>
</html>