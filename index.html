<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="AI-powered prompt generator and image analyzer for creating detailed, comprehensive prompts for image generation" />
    <meta name="theme-color" content="#1a1a1a" />
    <title>PromptsGenie - AI Prompt Generator &amp; Image Analyzer</title>

    <!-- DNS prefetch for API endpoints (faster API calls) -->
    <link rel="dns-prefetch" href="https://generativelanguage.googleapis.com" />

    <!-- Resource hints for critical assets -->
    <link rel="preconnect" href="https://generativelanguage.googleapis.com" crossorigin />
    
    <script type="text/javascript">
      // Aggressive error suppression - runs before extensions load
      (function() {
        const originalError = console.error;
        const originalWarn = console.warn;
        
        const shouldFilter = function(msg) {
          if (typeof msg !== 'string') msg = String(msg);
          return msg.toLowerCase().includes('maxmind') ||
                 msg.toLowerCase().includes('geoip') ||
                 msg.toLowerCase().includes('gfadunit') ||
                 msg.toLowerCase().includes('err_tunnel') ||
                 msg.toLowerCase().includes('chrome-extension');
        };
        
        console.error = function() {
          const msg = Array.prototype.slice.call(arguments).join(' ');
          if (shouldFilter(msg)) return;
          originalError.apply(console, arguments);
        };
        
        console.warn = function() {
          const msg = Array.prototype.slice.call(arguments).join(' ');
          if (shouldFilter(msg)) return;
          originalWarn.apply(console, arguments);
        };
        
        // Suppress unhandled rejections
        window.addEventListener('unhandledrejection', function(e) {
          const msg = String(e.reason || '');
          if (shouldFilter(msg)) {
            e.preventDefault();
          }
        });
        
        // Suppress global errors
        window.addEventListener('error', function(e) {
          const msg = String(e.message || '');
          if (shouldFilter(msg)) {
            e.preventDefault();
            return true;
          }
        });
      })();
      
      // SPA GitHub Pages redirect: restore deep links on fresh loads
      // Source: https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/') {
          var decoded = l.search.slice(1).split('&').map(function(s) {
            return s.replace(/~and~/g, '&');
          }).join('?');
          window.history.replaceState(null, null,
            l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location));
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>